{"ast":null,"code":"import { getDishes } from \"../../../api\";\nconst SET_DISH = \"SET_DISH\";\nconst SET_IS_FETCHING = \"SET_IS_FETCHING\";\nconst initialState = {\n  isFetching: true,\n  dishes: []\n};\nexport default function dishReducer(state = initialState, action) {\n  debugger;\n\n  switch (action.type) {\n    case SET_DISH:\n      if (state.dishes.length === 0) {\n        return { ...state,\n          dishes: action.payload,\n          isFetching: false\n        };\n      } else {\n        const dishIndex = state.dishes.findIndex(dish => dish.id === action.payload.id);\n\n        if (dishIndex == -1) {\n          return { ...state,\n            dishes: [{ ...state.dishes\n            }, action.payload]\n          };\n        }\n      }\n\n    case SET_IS_FETCHING:\n      return { ...state,\n        isFetching: action.payload\n      };\n\n    default:\n      return state;\n  }\n}\nexport const setDish = dish => ({\n  type: SET_DISH,\n  payload: dish\n});\nexport const setIsFetching = bool => ({\n  type: SET_IS_FETCHING,\n  payload: bool\n});\nexport const getDish = id => {\n  return async dispatch => {\n    dispatch(setIsFetching(true));\n    const response = await getDishes(id);\n    dispatch(setDish(response)); // debugger\n  };\n};","map":{"version":3,"sources":["/home/yesiaw/GitLabProgect/src/pages/dishes/ducks/reducer.js"],"names":["getDishes","SET_DISH","SET_IS_FETCHING","initialState","isFetching","dishes","dishReducer","state","action","type","length","payload","dishIndex","findIndex","dish","id","setDish","setIsFetching","bool","getDish","dispatch","response"],"mappings":"AAAA,SAASA,SAAT,QAA0B,cAA1B;AAEA,MAAMC,QAAQ,GAAG,UAAjB;AACA,MAAMC,eAAe,GAAG,iBAAxB;AAEA,MAAMC,YAAY,GAAG;AACpBC,EAAAA,UAAU,EAAE,IADQ;AAEpBC,EAAAA,MAAM,EAAE;AAFY,CAArB;AAKA,eAAe,SAASC,WAAT,CAAqBC,KAAK,GAAGJ,YAA7B,EAA2CK,MAA3C,EAAmD;AACjE;;AACA,UAAQA,MAAM,CAACC,IAAf;AAEC,SAAKR,QAAL;AAGC,UAAIM,KAAK,CAACF,MAAN,CAAaK,MAAb,KAAwB,CAA5B,EAA+B;AAC9B,eAAO,EAAE,GAAGH,KAAL;AAAYF,UAAAA,MAAM,EAAEG,MAAM,CAACG,OAA3B;AAAoCP,UAAAA,UAAU,EAAE;AAAhD,SAAP;AACA,OAFD,MAEO;AACN,cAAMQ,SAAS,GAAGL,KAAK,CAACF,MAAN,CAAaQ,SAAb,CAAwBC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYP,MAAM,CAACG,OAAP,CAAeI,EAA5D,CAAlB;;AACA,YAAGH,SAAS,IAAI,CAAC,CAAjB,EAAmB;AAClB,iBAAO,EACN,GAAGL,KADG;AAENF,YAAAA,MAAM,EAAE,CAAC,EAAE,GAAGE,KAAK,CAACF;AAAX,aAAD,EAAsBG,MAAM,CAACG,OAA7B;AAFF,WAAP;AAIA;AAED;;AAMF,SAAKT,eAAL;AACC,aAAO,EAAE,GAAGK,KAAL;AAAYH,QAAAA,UAAU,EAAEI,MAAM,CAACG;AAA/B,OAAP;;AACD;AACC,aAAOJ,KAAP;AAzBF;AA2BA;AAED,OAAO,MAAMS,OAAO,GAAIF,IAAD,KAAW;AAAEL,EAAAA,IAAI,EAAER,QAAR;AAAkBU,EAAAA,OAAO,EAAEG;AAA3B,CAAX,CAAhB;AACP,OAAO,MAAMG,aAAa,GAAIC,IAAD,KAAW;AACvCT,EAAAA,IAAI,EAAEP,eADiC;AAEvCS,EAAAA,OAAO,EAAEO;AAF8B,CAAX,CAAtB;AAKP,OAAO,MAAMC,OAAO,GAAIJ,EAAD,IAAQ;AAC9B,SAAO,MAAOK,QAAP,IAAoB;AAC1BA,IAAAA,QAAQ,CAACH,aAAa,CAAC,IAAD,CAAd,CAAR;AACA,UAAMI,QAAQ,GAAG,MAAMrB,SAAS,CAACe,EAAD,CAAhC;AACAK,IAAAA,QAAQ,CAACJ,OAAO,CAACK,QAAD,CAAR,CAAR,CAH0B,CAI1B;AACA,GALD;AAMA,CAPM","sourcesContent":["import { getDishes } from \"../../../api\";\n\nconst SET_DISH = \"SET_DISH\";\nconst SET_IS_FETCHING = \"SET_IS_FETCHING\";\n\nconst initialState = {\n\tisFetching: true,\n\tdishes: [],\n};\n\nexport default function dishReducer(state = initialState, action) {\n\tdebugger\n\tswitch (action.type) {\n\n\t\tcase SET_DISH:\n\n\t\t\t\n\t\t\tif (state.dishes.length === 0) {\n\t\t\t\treturn { ...state, dishes: action.payload, isFetching: false };\n\t\t\t} else {\n\t\t\t\tconst dishIndex = state.dishes.findIndex((dish) => dish.id === action.payload.id)\n\t\t\t\tif(dishIndex == -1){\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tdishes: [{ ...state.dishes }, action.payload]\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\n\n\n\n\t\tcase SET_IS_FETCHING:\n\t\t\treturn { ...state, isFetching: action.payload };\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nexport const setDish = (dish) => ({ type: SET_DISH, payload: dish });\nexport const setIsFetching = (bool) => ({\n\ttype: SET_IS_FETCHING,\n\tpayload: bool,\n});\n\nexport const getDish = (id) => {\n\treturn async (dispatch) => {\n\t\tdispatch(setIsFetching(true));\n\t\tconst response = await getDishes(id);\n\t\tdispatch(setDish(response));\n\t\t// debugger\n\t};\n};\n\n"]},"metadata":{},"sourceType":"module"}